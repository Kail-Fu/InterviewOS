services:
  backend:
    build:
      context: ./backend
    environment:
      APP_NAME: InterviewOS API
      APP_ENV: dev
      APP_BASE_URL: http://localhost:8000
      FRONTEND_BASE_URL: http://localhost:5173
      CORS_ORIGINS: "[\"*\"]"
      EMAIL_PROVIDER: smtp
      STORAGE_PROVIDER: local
      RECORDING_PROVIDER: local
      EMAIL_FROM: assessment@example.com
      LOCAL_ASSETS_DIR: assets
      LOCAL_ASSESSMENT_FILENAME: example_assessment.zip
      LOCAL_SUBMISSIONS_DIR: submissions
      LOCAL_RECORDINGS_DIR: recordings
      LOCAL_DB_PATH: data/interviewos.sqlite3
      SMTP_HOST: mailpit
      SMTP_PORT: 1025
      SMTP_USE_TLS: "false"
      SMTP_USE_SSL: "false"
      REMINDER_DELAY_SECONDS: 120
    ports:
      - "8000:8000"
    volumes:
      - ./backend/assets:/app/assets
      - ./backend/submissions:/app/submissions
      - ./backend/recordings:/app/recordings
      - ./backend/data:/app/data
    depends_on:
      - mailpit

  frontend:
    build:
      context: ./frontend
    environment:
      VITE_API_BASE_URL: http://localhost:8000
    ports:
      - "5173:5173"
    depends_on:
      - backend

  mailpit:
    image: axllent/mailpit:latest
    ports:
      - "1025:1025"
      - "8025:8025"
